<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ML-Based Fraud Detection Analysis</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/papaparse"></script>
    <script src="https://cdn.jsdelivr.net/npm/ml-matrix@6.11.0/dist/ml-matrix.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/ml-stat@1.3.3/dist/ml-stat.min.js"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  </head>
  <body>
    <div class="container">
      <header>
        <h1>ML-Based Fraud Detection Analysis</h1>
        <p class="subtitle">Upload transaction data for advanced fraud analysis</p>
      </header>

      <div class="upload-section">
        <div class="upload-box" id="dropZone">
          <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
            <polyline points="17 8 12 3 7 8"/>
            <line x1="12" y1="3" x2="12" y2="15"/>
          </svg>
          <h3>Drag & Drop Files</h3>
          <p>or</p>
          <label class="file-input-label">
            Choose File
            <input type="file" id="fileInput" accept=".csv" hidden>
          </label>
          <p class="file-types">Supports CSV files with transaction data</p>
        </div>
      </div>

      <div id="results" class="results hidden">
        <div class="results-header">
          <h2>ML Analysis Results</h2>
          <div class="summary-stats">
            <div class="stat-card">
              <h4>Total Transactions</h4>
              <span id="totalTransactions">0</span>
            </div>
            <div class="stat-card">
              <h4>Fraudulent</h4>
              <span id="fraudCount">0</span>
            </div>
            <div class="stat-card">
              <h4>Normal</h4>
              <span id="normalCount">0</span>
            </div>
          </div>
        </div>
        
        <div class="chart-container">
          <canvas id="riskChart"></canvas>
        </div>

        <div class="transactions-table">
          <h3>Transaction Details</h3>
          <div class="table-container">
            <table>
              <thead>
                <tr>
                  <th>Transaction ID</th>
                  <th>Amount</th>
                  <th>Prediction</th>
                  <th>Status</th>
                </tr>
              </thead>
              <tbody id="transactionsBody"></tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <div class="processing-overlay" id="processingOverlay">
      <div class="processing-content">
        <div class="spinner"></div>
        <h3>Processing Data</h3>
        <p>Analyzing transactions using ML model...</p>
      </div>
    </div>

    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
  </body>
</html>